---
import Layout from '../../layouts/Layout.astro';
import LeadForm from '../../components/LeadForm.astro';
import { locations } from '../../data/locations';

export async function getStaticPaths() {
  return locations.flatMap(location => 
    location.communes.map(commune => ({
      params: { ville: location.ville, commune },
    }))
  );
}

const { ville, commune } = Astro.params;
const capitalizedVille = ville.charAt(0).toUpperCase() + ville.slice(1);
const capitalizedCommune = commune.charAt(0).toUpperCase() + commune.slice(1);

const title = `Plombier √† ${capitalizedCommune} | Service Plomberie 24/7`;
const description = `Service de plomberie professionnel √† ${capitalizedCommune}, ${capitalizedVille}. Intervention rapide 24/7, devis gratuit. D√©pannage d'urgence, installation, r√©paration.`;
const canonicalUrl = `https://plombierenurgence.com/${ville}/${commune}`;

const services = [
  {
    title: "D√©pannage d'urgence",
    description: "Notre √©quipe de plombiers professionnels est disponible 24/7 pour tous vos probl√®mes de plomberie urgents √† " + capitalizedCommune + ". Que ce soit une fuite d'eau, un WC bouch√© ou un probl√®me de chauffe-eau, nous intervenons rapidement pour minimiser les d√©g√¢ts.",
    price: "√Ä partir de 80‚Ç¨"
  },
  {
    title: "Installation et r√©novation",
    description: "Nous r√©alisons l'installation et la r√©novation compl√®te de votre plomberie. De la simple robinetterie aux syst√®mes sanitaires complexes, notre expertise garantit un travail de qualit√©.",
    price: "Sur devis"
  },
  {
    title: "D√©tection de fuites",
    description: "Gr√¢ce √† notre √©quipement de pointe, nous localisons pr√©cis√©ment les fuites d'eau, m√™me les plus difficiles √† d√©tecter. Un service essentiel pour √©viter les d√©g√¢ts des eaux et les factures excessives.",
    price: "√Ä partir de 120‚Ç¨"
  }
];

const testimonials = [
  {
    name: "Marc Dubois",
    text: "Excellent service ! Intervention rapide et efficace pour une fuite d'eau urgente.",
    rating: 5
  },
  {
    name: "Sophie Lambert",
    text: "Tr√®s professionnel et prix raisonnable. Je recommande vivement leurs services.",
    rating: 5
  },
  {
    name: "Pierre Dumont",
    text: "Service client exemplaire et travail de qualit√©. Merci !",
    rating: 5
  }
];
---

<Layout title={title} description={description} canonicalUrl={canonicalUrl}>
  <section class="bg-gradient-to-r from-blue-600 to-blue-800 text-white py-16">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="grid md:grid-cols-2 gap-12 items-center">
        <div>
          <h1 class="text-4xl font-bold mb-6">
            Plombier √† {capitalizedCommune}
          </h1>
          <p class="text-xl mb-8">
            Service de plomberie professionnel disponible 24/7 √† {capitalizedCommune}. Intervention rapide garantie.
          </p>
          <div class="flex gap-4">
            <a href="tel:+32123456789" class="bg-white text-blue-600 px-6 py-3 rounded-md font-bold hover:bg-gray-100 transition duration-300">
              Appeler maintenant
            </a>
          </div>
        </div>
        <div>
          <LeadForm />
        </div>
      </div>
    </div>
  </section>

  <section class="py-16">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <h2 class="text-3xl font-bold mb-12 text-center">Nos Services √† {capitalizedCommune}</h2>
      <div class="grid md:grid-cols-3 gap-8">
        {services.map(service => (
          <div class="bg-white p-6 rounded-lg shadow-lg">
            <h3 class="text-xl font-bold mb-4">{service.title}</h3>
            <p class="mb-4">{service.description}</p>
            <p class="text-blue-600 font-bold">{service.price}</p>
          </div>
        ))}
      </div>
    </div>
  </section>

  <section class="bg-gray-100 py-16">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <h2 class="text-3xl font-bold mb-12 text-center">T√©moignages de nos clients √† {capitalizedCommune}</h2>
      <div class="grid md:grid-cols-3 gap-8">
        {testimonials.map(testimonial => (
          <div class="bg-white p-6 rounded-lg shadow-lg">
            <div class="flex items-center mb-4">
              {Array.from({ length: testimonial.rating }).map(() => (
                <svg class="w-5 h-5 text-yellow-400" fill="currentColor" viewBox="0 0 20 20">
                  <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z" />
                </svg>
              ))}
            </div>
            <p class="mb-4">{testimonial.text}</p>
            <p class="font-bold">{testimonial.name}</p>
          </div>
        ))}
      </div>
    </div>
  </section>

  <section class="py-16">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <h2 class="text-3xl font-bold mb-12 text-center">Pourquoi choisir notre service de plomberie √† {capitalizedCommune} ?</h2>
      <div class="prose max-w-none">
        <p>Notre √©quipe de plombiers professionnels est fi√®re de servir la communaut√© de {capitalizedCommune} depuis plus de 15 ans. Nous comprenons l'importance d'un service de plomberie fiable et rapide, c'est pourquoi nous nous engageons √† fournir des solutions efficaces pour tous vos besoins en plomberie.</p>
        
        <h3 class="text-2xl font-bold mt-8 mb-4">Notre expertise √† {capitalizedCommune}</h3>
        <ul class="list-disc pl-6 mb-6">
          <li>Intervention rapide en cas d'urgence 24/7</li>
          <li>√âquipe de plombiers certifi√©s et exp√©riment√©s</li>
          <li>Utilisation de mat√©riel et d'√©quipements de derni√®re g√©n√©ration</li>
          <li>Devis gratuit et transparent</li>
          <li>Garantie sur tous nos travaux</li>
        </ul>

        <h3 class="text-2xl font-bold mt-8 mb-4">Services de plomberie disponibles √† {capitalizedCommune}</h3>
        <table class="w-full border-collapse border border-gray-300 mb-6">
          <thead>
            <tr class="bg-gray-100">
              <th class="border border-gray-300 p-3">Service</th>
              <th class="border border-gray-300 p-3">D√©lai d'intervention</th>
              <th class="border border-gray-300 p-3">Tarif indicatif</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="border border-gray-300 p-3">D√©pannage d'urgence</td>
              <td class="border border-gray-300 p-3">30 minutes √† 1 heure</td>
              <td class="border border-gray-300 p-3">√Ä partir de 80‚Ç¨</td>
            </tr>
            <tr>
              <td class="border border-gray-300 p-3">Installation sanitaire</td>
              <td class="border border-gray-300 p-3">Sur rendez-vous</td>
              <td class="border border-gray-300 p-3">Sur devis</td>
            </tr>
            <tr>
              <td class="border border-gray-300 p-3">D√©tection de fuites</td>
              <td class="border border-gray-300 p-3">M√™me jour</td>
              <td class="border border-gray-300 p-3">√Ä partir de 120‚Ç¨</td>
            </tr>
          </tbody>
        </table>

        <h3 class="text-2xl font-bold mt-8 mb-4">Zone d'intervention √† {capitalizedCommune}</h3>
        <p>Nous intervenons dans tous les quartiers de {capitalizedCommune} et ses environs. Notre proximit√© nous permet de garantir une intervention rapide en cas d'urgence. Que vous soyez un particulier ou un professionnel, nous sommes √† votre disposition pour tous vos besoins en plomberie.</p>

        <div class="bg-blue-50 p-6 rounded-lg mt-8">
          <h3 class="text-2xl font-bold mb-4">Contactez-nous</h3>
          <p>Pour un service de plomberie professionnel √† {capitalizedCommune}, n'h√©sitez pas √† nous contacter :</p>
          <ul class="list-none pl-0 mt-4">
            <li class="mb-2">üìû T√©l√©phone : <a href="tel:+32123456789" class="text-blue-600 hover:underline">+32 123 456 789</a></li>
            <li class="mb-2">‚úâÔ∏è Email : contact@plombierenurgence.com</li>
            <li>‚è∞ Disponible 24/7 pour les urgences</li>
          </ul>
        </div>
      </div>
    </div>
  </section>
</Layout>